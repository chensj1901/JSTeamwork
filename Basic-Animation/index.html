<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Basic Animation</title>
</head>

<link rel="stylesheet" href="style.css"/>
<body>

<canvas id="animation-canvas" width="800" height="600" style="border:1px solid #000;">
    <p>
        Unfortunately, your browser does not currently support HTML5 Canvas.
        Please, check <a href="http://caniuse.com/#feat=canvas">here</a>
        for information on browser support for canvas.
    </p>
</canvas>

<script src="entities.js"></script>
<script src="sprite.js"></script>
<script src="HealthBar1/raphael.js"></script>
<script src="HealthBar1/HealthBar.js"></script>


<script>
    var canvas = document.getElementById("animation-canvas"),
        context = canvas.getContext('2d');

    // TODO: Add game states - initial screen with instructions, game on, game over, credits.
    // Initialize objects
    var shark = new Shark(context, 50, 250 );
    var prey = new Prey(context, 750, 250);
    var healthBar= new HealthBar(300,1,5);

    var background = new Background(context, 'images/ocean-floor.png', 4);

    // TODO: Add mouse events for menu navigation.
    // User interaction
    function onKeyboardEvent (event) {
        if (event.keyCode === 32) {
            shark.jump();
        }
    }

    // Animation
    function drawFrame () {
        context.clearRect(0, 0, canvas.width, canvas.height);

        healthBar.update();
        healthBar.draw();

        shark.update();
        shark.draw();

        prey.draw();
        prey.update();

        background.draw();

        window.requestAnimationFrame(drawFrame, canvas);
    }

    // The main game loop
    function main() {
        var spriteSheet = new Image();
        spriteSheet.onload = function () {
            initializeSprites(spriteSheet)
        };
        spriteSheet.src = '';

        window.addEventListener('keydown', onKeyboardEvent, false);
        window.requestAnimationFrame(drawFrame, canvas);
    }

    main();

</script>

</body>

</html>