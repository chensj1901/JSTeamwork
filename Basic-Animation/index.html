<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Basic Animation</title>
    <link rel="stylesheet" href="style.css"/>
</head>

<body>

<canvas id="animation-canvas" width="800" height="600">
    <p>
        Unfortunately, your browser does not currently support HTML5 Canvas.
        Please, check <a href="http://caniuse.com/#feat=canvas">here</a>
        for information on browser support for canvas.
    </p>
</canvas>

<script src="entities.js"></script>
<script src="sprite.js"></script>
<script src="HealthBar1/raphael.js"></script>
<script src="HealthBar1/HealthBar.js"></script>

<script>
    var canvas = document.getElementById("animation-canvas"),
        context = canvas.getContext('2d');


    // TODO: Add game states - initial screen with instructions, game on, game over, credits.
    // Initialize objects
    var shark = new Shark(context, 50, 250);
    var prey = new Prey(context, 750, 250);

    var healthBar = new HealthBar(300, 1, 5);
    var oceanFloorBackground = new BackgroundFeature(context, 'images/ocean-floor.png', 370, 4);
    var boatBackground = new BackgroundFeature(context, 'images/boat.png', 42, 2);

    function drawCanvasTopBorder (positionY) {
        context.beginPath();
        context.moveTo(0, positionY);
        context.lineTo(canvas.width, positionY);
        context.stroke();
    }

    // TODO: Add mouse events for menu navigation.
    // User interaction
    function onKeyboardEvent (event) {
        if (event.keyCode === 32) {
            shark.jump();
        }
    }

    function onMouseClickEvent (event) {
        console.log(event.pageX);
    }

    // Draw health bar
//    setInterval(function(){
//        healthBar.update();
//        healthBar.draw();
//    }, 200);

//    function drawHealthBar() {
//        healthBar.update();
//        healthBar.draw();
//        window.requestAnimationFrame(drawHealthBar);
//    }



    // Animation
    function drawFrame () {
        context.clearRect(0, 0, canvas.width, canvas.height);

<<<<<<< HEAD
        healthBar.update();
      //  healthBar.draw();
=======
//        healthBar.update();
//        healthBar.draw();
>>>>>>> origin/master

        shark.update();
        shark.draw();

        prey.update();
        prey.draw();


        oceanFloorBackground.draw();
        boatBackground.draw();

        drawCanvasTopBorder(40);

        window.requestAnimationFrame(drawFrame, canvas);
    }

    // The main game loop
    function main() {
        var spriteSheet = new Image();
        spriteSheet.onload = function () {
            initializeSprites(spriteSheet)
        };
        spriteSheet.src = '';

        window.addEventListener('keydown', onKeyboardEvent, false);
        window.addEventListener('click', onMouseClickEvent, false);
        window.requestAnimationFrame(drawFrame, canvas);
    }

    main();

</script>

</body>

</html>